const axios =  require('axios').default

const fazerBusca = async (req, res) => {
    
    
    try {
        const {genero} = req.params
        console.log('rodei');
        console.log(genero);
        const {data} = await axios.get(           
           `http://openlibrary.org/subjects/${genero}.json`
        );
        
        const result = {
            t√≠tulo: data.works[6].title,
            autor: data.works[6].authors[0].name,
        }
        console.log(result); 
        return res.status(200).json(result);
    } catch (error) {  
        console.log('deu ruim');      
        return res.status(400).json(error)
    }
}

module.exports = fazerBusca